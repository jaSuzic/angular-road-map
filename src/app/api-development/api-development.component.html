<div class="content">
  <h1>API-driven Development (REST vs GraphQL)</h1>

  <div class="api-overview">
    <div class="api-section">
      <h2>REST</h2>
      <ul>
        <li>REST je skraćenica od <strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer.</li>
        <li>To je arhitektonski stil za dizajn web servisa, zasnovan na resursima i korišćenju standardnih HTTP metoda (GET, POST, PUT, DELETE).</li>
        <li>Svaki resurs (npr. users, orders) se predstavlja kao URL, a format odgovora je obično JSON ili XML.</li>
        <li>REST je jednostavan, lako keširan i dobro radi sa CDN-ovima i standardnim browser alatima.</li>
      </ul>
    </div>

    <div class="api-section">
      <h2>GraphQL</h2>
      <ul>
        <li>GraphQL znači <strong>Graph Query Language</strong> (nije skraćenica tipa REST, nego bukvalno "jezik za upite nad grafom podataka").</li>
        <li>Umesto više endpoint-ova, postoji jedan endpoint kojem klijent šalje upit u obliku "query-ja" i sam bira koja polja hoće da dobije.</li>
        <li>Na taj način se izbegava "overfetching" (previše podataka) i "underfetching" (premalo podataka → više rundi poziva).</li>
        <li>GraphQL ima tipizovanu schemu, pa su i upiti i odgovori striktno definisani.</li>
      </ul>
    </div>
  </div>

  <div class="use-cases">
    <h2>Kada koristiti REST vs GraphQL?</h2>
    <div class="comparison">
      <div class="rest-case">
        <h3>Kada REST:</h3>
        <ul>
          <li>Jednostavan CRUD</li>
          <li>Keširanje preko URL-a, CDN friendly</li>
          <li>Stabilni resursi, bez teških "join" potreba</li>
        </ul>
      </div>
      <div class="graphql-case">
        <h3>Kada GraphQL:</h3>
        <ul>
          <li>Izbegavanje over/under-fetching-a (pogotovo na mobilnim uređajima)</li>
          <li>Kompleksne relacije i agregacije</li>
          <li>Kada želite jedan round-trip za više entiteta</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="code-example">
    <h2>Primeri implementacije</h2>
    <div class="code-tabs">
      <div class="code-tab" *ngFor="let tab of codeTabs; let i = index">
        <button 
          class="tab-button" 
          [class.active]="activeTab === i"
          (click)="activeTab = i"
        >
          {{ tab }}
        </button>
      </div>
    </div>
    <div class="code-content">
      <pre *ngIf="activeTab === 0"><code [innerHTML]="restExample"></code></pre>
      <pre *ngIf="activeTab === 1"><code [innerHTML]="graphqlExample"></code></pre>
    </div>
  </div>

  <div class="trade-offs">
    <h2>Trade-offs</h2>
    <div class="comparison">
      <div class="rest-trade">
        <h3>REST</h3>
        <ul>
          <li>Lakše keširanje</li>
          <li>Jednostavniji server</li>
          <li>Više rundi za složenije upite</li>
          <li>"One size fits all" payload</li>
        </ul>
      </div>
      <div class="graphql-trade">
        <h3>GraphQL</h3>
        <ul>
          <li>Precizan payload (samo ono što je potrebno)</li>
          <li>Jedan endpoint za sve upite</li>
          <li>Složeniji server</li>
          <li>Zahteva bolji schema governance</li>
          <li>Kompleksnije keširanje (ali dobro sa normalized cache-om)</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<style>
  .content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  h1 {
    color: #1976d2;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  h2 {
    color: #0d47a1;
    margin: 1.5rem 0 1rem;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 0.5rem;
  }

  h3 {
    color: #1565c0;
    margin: 1.2rem 0 0.8rem;
  }

  .api-overview, .use-cases, .trade-offs {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    margin-bottom: 30px;
  }

  .api-section {
    margin-bottom: 20px;
  }

  .comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 15px;
  }

  .rest-case, .graphql-case,
  .rest-trade, .graphql-trade {
    background: #f8f9fa;
    border-radius: 6px;
    padding: 15px;
  }

  .rest-case, .rest-trade {
    border-left: 4px solid #4caf50;
  }

  .graphql-case, .graphql-trade {
    border-left: 4px solid #9c27b0;
  }

  ul {
    padding-left: 20px;
  }

  li {
    margin-bottom: 8px;
    line-height: 1.5;
  }

  .code-example {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    margin-bottom: 30px;
  }

  .code-tabs {
    display: flex;
    border-bottom: 1px solid #ddd;
    margin-bottom: 15px;
  }

  .code-tab {
    margin-right: 5px;
  }

  .tab-button {
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-bottom: none;
    padding: 8px 16px;
    cursor: pointer;
    border-radius: 4px 4px 0 0;
    font-size: 14px;
  }

  .tab-button:hover {
    background: #e9e9e9;
  }

  .tab-button.active {
    background: #1976d2;
    color: white;
    border-color: #1976d2;
  }

  .code-content {
    background: #f8f9fa;
    border-radius: 0 0 4px 4px;
    padding: 15px;
    overflow-x: auto;
  }

  pre {
    margin: 0;
    padding: 0;
    background: none;
    font-size: 14px;
    line-height: 1.5;
  }

  code {
    font-family: 'Courier New', monospace;
    display: block;
    white-space: pre;
    overflow-x: auto;
    padding: 0;
    background: none;
    color: #333;
  }

  @media (max-width: 768px) {
    .comparison {
      grid-template-columns: 1fr;
    }
  }
</style>
